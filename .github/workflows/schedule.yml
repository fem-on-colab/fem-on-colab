name: Scheduled releases of new FEM on Colab end user packages

on:
  schedule:
    - cron: "0 0 * * SAT"
  workflow_dispatch:

jobs:
  # Mock build & test
  build_mock:
    if: github.repository == 'fem-on-colab/fem-on-colab'
    uses: fem-on-colab/fem-on-colab/.github/workflows/release.yml@main
    with:
      library: "mock"
      task: "build"
      args: ""
    secrets:
      REPO_ACCESS_TOKEN: ${{ secrets.REPO_ACCESS_TOKEN }}

  test_mock:
    needs: [build_mock]
    uses: fem-on-colab/fem-on-colab/.github/workflows/release.yml@main
    with:
      library: "mock"
      task: "test"
      args: ""
